#monit base configuration file

#set polling interval to 30 sec
set daemon 30

#set monit state file location
set statefile /opt/nokia/monit/monit.state

#set http daemon port and allow only connection from localhost
set httpd port <%= port_monit %>
 allow localhost

#set monit logfile location 
set logfile /var/log/nokia/monit/monit.log

#log rolling
check file monit_log with path /var/log/nokia/monit/monit.log
 #rotate the log
 if size > 10 MB then
       exec "/usr/sbin/logrotate -f /opt/nokia/monit/monit_logrotate.cfg -s /opt/nokia/monit/logrotate.status"
 #reload so that monit write in a new log file, otherwise it will keep the same inode for writing
 if size > 10 MB then
       exec "/usr/bin/monit -c /opt/nokia/monit/monit.cfg reload"


#load all application specific config from servers_monit_cfg 
include /opt/nokia/monit/servers_monit.cfg
