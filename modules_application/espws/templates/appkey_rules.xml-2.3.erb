<?xml version="1.0"?>
<configuration> 
	<appKeyRules>
		<providerType name="facebook">
<% operatorName.zip(facebookMyriadUpdate,facebookAndroid,facebookRomeo,facebookMRE,facebookoauthapikey,facebookoauthsecretkey,webServerUri).each do | operator , MyriadUpdateFlag, AndroidFlag, RomeoFlag, MREFlag, oauthapikey, oauthsecretkey, uri | -%>
<% if MyriadUpdateFlag == 'YES' -%>
<% networkCode.zip(descNamePerNC).each do | networkCode, description | -%>
<% if description.include? operator -%>
<% if description.include? 'catch_all' -%>
<% networkCode = '*' -%>
<% end -%>
			<appKeyRule clientId="*Myriad_Update*" networkCode="<%= networkCode %>">	<!-- <%= description %> -->
				<key><%= facebookapikey %></key>
				<param name="facebookSecretKey" value="<%= facebooksecretkey %>" />
				<param name="facebookSignRequestFlag" value="false" />
				<param name="facebookUseGlobalGraphUserSearch" value="false" />
				<param name="facebookUsePhoneUserMapSearch" value="true" />
				<param name="facebookUsePrivateApiCall" value="true" />
				<param name="facebookUseUserOtherPhoneAttribute" value="false" />
				<param name="registerSchemes" value="BASIC" />
			</appKeyRule>
<% end -%>
<% end -%>
<% end -%>
<% if AndroidFlag == 'YES' -%>
<% networkCode.zip(descNamePerNC).each do | networkCode, description | -%>
<% if description.include? operator -%>
<% if description.include? 'catch_all' -%>
<% networkCode = '*' -%>
<% end -%>
			<appKeyRule clientId="*Android*" networkCode="<%= networkCode %>">	<!-- <%= description %> -->
				<key><%= oauthapikey %></key>
				<param name="facebookSecretKey" value="<%= oauthsecretkey %>" />
				<param name="facebookSignRequestFlag" value="false" />
				<param name="facebookUseGlobalGraphUserSearch" value="false" />
				<param name="facebookUsePhoneUserMapSearch" value="false" />
				<param name="facebookUsePrivateApiCall" value="false" />
				<param name="facebookUseUserOtherPhoneAttribute" value="false" />
				<param name="getPersonsGlobalSearchSupported" value="false" />
				<param name="getPersonsSearchTypeUnsupported" value="EMAIL,PHONE" />
				<param name="postActivityToFriendSupported" value="false" />
				<param name="registerSchemes" value="WEBREDIRECT" />
				<param name="unsupportedFeaturesList" value="ComposeMailMessageFeature,DeleteMailMessageFeature,EditMailMessageThreadFeature,ReplyToMailMessageThreadFeature,RespondPersonRequestFeature,GetReceivedPersonRequestFeature,AddPhotoCommentFeature" />
				<param name="webServerUri" value="https://<%= uri %>/cgi-bin/sngtw-web-redirect-facebook.pl" />
			</appKeyRule>
<% end -%>
<% end -%>
<% end -%>
<% if RomeoFlag == 'YES' -%>
<% networkCode.zip(descNamePerNC).each do | networkCode, description | -%>
<% if description.include? operator -%>
<% if description.include? 'catch_all' -%>
<% networkCode = '*' -%>
<% end -%>
			<appKeyRule clientId="*Romeo*" networkCode="<%= networkCode %>">	<!-- <%= description %> -->
				<key><%= oauthapikey %></key>
				<param name="facebookSecretKey" value="<%= oauthsecretkey %>" />
				<param name="facebookSignRequestFlag" value="false" />
				<param name="facebookUseGlobalGraphUserSearch" value="false" />
				<param name="facebookUsePhoneUserMapSearch" value="false" />
				<param name="facebookUsePrivateApiCall" value="false" />
				<param name="facebookUseUserOtherPhoneAttribute" value="false" />
				<param name="getPersonsGlobalSearchSupported" value="false" />
				<param name="getPersonsSearchTypeUnsupported" value="EMAIL,PHONE" />
				<param name="postActivityToFriendSupported" value="false" />
				<param name="registerSchemes" value="WEBREDIRECT" />
				<param name="unsupportedFeaturesList" value="ComposeMailMessageFeature,DeleteMailMessageFeature,EditMailMessageThreadFeature,ReplyToMailMessageThreadFeature,RespondPersonRequestFeature,GetReceivedPersonRequestFeature,AddPhotoCommentFeature" />
				<param name="webServerUri" value="https://<%= uri %>/cgi-bin/sngtw-web-redirect-facebook.pl" />
			</appKeyRule>
<% end -%>
<% end -%>
<% end -%>
<% if MREFlag == 'YES' -%>
<% networkCode.zip(descNamePerNC).each do | networkCode, description | -%>
<% if description.include? operator -%>
<% if description.include? 'catch_all' -%>
<% networkCode = '*' -%>
<% end -%>
			<appKeyRule clientId="*MRE*" networkCode="<%= networkCode %>">	<!-- <%= description %> -->
				<key><%= oauthapikey %></key>
				<param name="facebookSecretKey" value="<%= oauthsecretkey %>" />
				<param name="facebookSignRequestFlag" value="false" />
				<param name="facebookUseGlobalGraphUserSearch" value="false" />
				<param name="facebookUsePhoneUserMapSearch" value="false" />
				<param name="facebookUsePrivateApiCall" value="false" />
				<param name="facebookUseUserOtherPhoneAttribute" value="false" />
				<param name="getPersonsGlobalSearchSupported" value="false" />
				<param name="getPersonsSearchTypeUnsupported" value="EMAIL,PHONE" />
				<param name="postActivityToFriendSupported" value="false" />
				<param name="registerSchemes" value="WEBREDIRECT" />
				<param name="unsupportedFeaturesList" value="ComposeMailMessageFeature,DeleteMailMessageFeature,EditMailMessageThreadFeature,ReplyToMailMessageThreadFeature,RespondPersonRequestFeature,GetReceivedPersonRequestFeature,AddPhotoCommentFeature" />
				<param name="webServerUri" value="https://<%= uri %>/cgi-bin/sngtw-web-redirect-facebook.pl" />
			</appKeyRule>
<% end -%>
<% end -%>
<% end -%>
<% end -%>
			<appKeyRule clientId="*" networkCode="*">		<!-- REQUIRED CATCH ALL CASE -->
				<key>AccessBlocked</key>
				<param name="facebookSecretKey" value="AccessBlocked" />
				<param name="facebookSignRequestFlag" value="false" />
				<param name="facebookUseGlobalGraphUserSearch" value="false" />
				<param name="facebookUsePhoneUserMapSearch" value="false" />
				<param name="facebookUsePrivateApiCall" value="true" />
				<param name="facebookUseUserOtherPhoneAttribute" value="false" />
				<param name="registerSchemes" value="BASIC" />
			</appKeyRule>
		</providerType>
		<providerType name="twitter">
<% operatorName.zip(twitterMyriadUpdate,twitterAndroid,twitterRomeo,twitterMRE,twitteroauthconsumerkey,twitteroauthconsumersecret,webServerUri).each do | operator, MyriadUpdateFlag, AndroidFlag, RomeoFlag, MREFlag, oauthconsumerkey, oauthconsumersecret, uri | -%>
<% if MyriadUpdateFlag == 'YES' -%>
<% networkCode.zip(descNamePerNC).each do | networkCode, description | -%>
<% if description.include? operator -%>
<% if description.include? 'catch_all' -%>
<% networkCode = '*' -%>
<% end -%>
			<appKeyRule clientId="*Myriad_Update*" networkCode="<%= networkCode %>">	<!-- <%= description %> -->
				<key><%= twitterconsumerkey %></key>
				<param name="twitterConsumerSecret" value="<%= twitterconsumersecret %>" />
				<param name="registerSchemes" value="BASIC" />
			</appKeyRule>
<% end -%>
<% end -%>
<% end -%>
<% if AndroidFlag == 'YES' -%>
<% networkCode.zip(descNamePerNC).each do | networkCode, description | -%>
<% if description.include? operator -%>
<% if description.include? 'catch_all' -%>
<% networkCode = '*' -%>
<% end -%>
			<appKeyRule clientId="*Android*" networkCode="<%= networkCode %>">	<!-- <%= description %> -->
				<key><%= oauthconsumerkey %></key>
				<param name="twitterConsumerSecret" value="<%= oauthconsumersecret %>" />
				<param name="registerSchemes" value="WEBREDIRECT" />
				<param name="webServerUri" value="https://<%= uri %>/cgi-bin/sngtw-web-redirect-twitter.pl" />
			</appKeyRule>
<% end -%>
<% end -%>
<% end -%>
<% if RomeoFlag == 'YES' -%>
<% networkCode.zip(descNamePerNC).each do | networkCode, description | -%>
<% if description.include? operator -%>
<% if description.include? 'catch_all' -%>
<% networkCode = '*' -%>
<% end -%>
			<appKeyRule clientId="*Romeo*" networkCode="<%= networkCode %>">	<!-- <%= description %> -->
				<key><%= oauthconsumerkey %></key>
				<param name="twitterConsumerSecret" value="<%= oauthconsumersecret %>" />
				<param name="registerSchemes" value="WEBREDIRECT" />
				<param name="webServerUri" value="https://<%= uri %>/cgi-bin/sngtw-web-redirect-twitter.pl" />
			</appKeyRule>
<% end -%>
<% end -%>
<% end -%>
<% if MREFlag == 'YES' -%>
<% networkCode.zip(descNamePerNC).each do | networkCode, description | -%>
<% if description.include? operator -%>
<% if description.include? 'catch_all' -%>
<% networkCode = '*' -%>
<% end -%>
			<appKeyRule clientId="*MRE*" networkCode="<%= networkCode %>">	<!-- <%= description %> -->
				<key><%= oauthconsumerkey %></key>
				<param name="twitterConsumerSecret" value="<%= oauthconsumersecret %>" />
				<param name="registerSchemes" value="WEBREDIRECT" />
				<param name="webServerUri" value="https://<%= uri %>/cgi-bin/sngtw-web-redirect-twitter.pl" />
			</appKeyRule>
<% end -%>
<% end -%>
<% end -%>
<% end -%>
			<appKeyRule clientId="*" networkCode="*">		<!-- REQUIRED CATCH ALL CASE -->
				<key>AccessBlocked</key>
				<param name="twitterConsumerSecret" value="AccessBlocked" />
				<param name="registerSchemes" value="BASIC" />
			</appKeyRule>
		</providerType>
	</appKeyRules>
</configuration>
