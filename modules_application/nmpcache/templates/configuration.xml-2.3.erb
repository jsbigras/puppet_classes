<?xml version="1.0" encoding="UTF-8"?>
<configuration>
   <server.cache>
      <ehcache>
         <server.http>
            <!-- Configure Interface IP -->
            <listening-interface><%= ipaddress %></listening-interface>
            <listening-port><%= l_port_cache %></listening-port>
         </server.http>

<% cacheid_desc.zip(cacheid_name,cacheid_maxinmem,cacheid_verenabled,cacheid_hddpersist).each do |description, name, maxinmem, verenabled, hddpersist| -%>
			<!-- ##### <%= description %> ###### -->
			<cache name="<%= name %>"			maxElementsInMemoryForCluster="<%= maxinmem %>"
									versioningEnabled="<%= verenabled %>"
									hddPersistent="<%= hddpersist %>">
<% if ipaddress == cache_primary && cache_secondary != '' -%>
				<peerUrl>http://<%= cache_secondary %>:<%= l_port_cache %>/nmp-cache/peer</peerUrl>
<% elsif ipaddress == cache_secondary -%>
				<peerUrl>http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache/peer</peerUrl>
<% end -%>
			</cache>
<% end -%>

      </ehcache>
   </server.cache>
</configuration>
