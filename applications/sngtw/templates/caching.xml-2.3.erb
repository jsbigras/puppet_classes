<?xml version="1.0"?>
<CONFIGURATION service="caching">
    <caches>
        <cache id="credentials">
            <remote type="cacheserver">
                <http-client>
                    <read-timeout-ms>10000</read-timeout-ms>
                    <connect-timeout-ms>10000</connect-timeout-ms>
                    <max-connections-total>20000</max-connections-total>
                    <max-connections-per-host>20000</max-connections-per-host>
                </http-client>
                <max-error-failover>10</max-error-failover>
                <max-time-failover unit="SECONDS">10</max-time-failover>
                <ping-period unit="SECONDS">5</ping-period>
                <reroute-delay unit="MINUTES">20</reroute-delay>
<% if cache_secondary != '' -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_secondary %>:<%= l_port_cache %>/nmp-cache"/>
<% else -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache"/>
<% end -%>
            </remote>
        </cache>
        <cache id="mediatransfer">
            <remote type="cacheserver">
                <http-client>
                    <read-timeout-ms>10000</read-timeout-ms>
                    <connect-timeout-ms>10000</connect-timeout-ms>
                    <max-connections-total>20000</max-connections-total>
                    <max-connections-per-host>20000</max-connections-per-host>
                </http-client>
                <max-error-failover>10</max-error-failover>
                <max-time-failover unit="SECONDS">10</max-time-failover>
                <ping-period unit="SECONDS">5</ping-period>
                <reroute-delay unit="MINUTES">20</reroute-delay>
<% if cache_secondary != '' -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_secondary %>:<%= l_port_cache %>/nmp-cache"/>
<% else -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache"/>
<% end -%>
            </remote>
        </cache>
        <cache id="subscriptions">
            <remote type="cacheserver">
                <http-client>
                    <read-timeout-ms>10000</read-timeout-ms>
                    <connect-timeout-ms>10000</connect-timeout-ms>
                    <max-connections-total>20000</max-connections-total>
                    <max-connections-per-host>20000</max-connections-per-host>
                </http-client>
                <max-error-failover>10</max-error-failover>
                <max-time-failover unit="SECONDS">10</max-time-failover>
                <ping-period unit="SECONDS">5</ping-period>
                <reroute-delay unit="MINUTES">20</reroute-delay>
<% if cache_secondary != '' -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_secondary %>:<%= l_port_cache %>/nmp-cache"/>
<% else -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache"/>
<% end -%>
            </remote>
        </cache>
        <cache id="esp">
            <memory max-size="50000"/>
        </cache>
        <cache id="channel">
            <remote type="cacheserver">
                <http-client>
                    <read-timeout-ms>10000</read-timeout-ms>
                    <connect-timeout-ms>10000</connect-timeout-ms>
                    <max-connections-total>20000</max-connections-total>
                    <max-connections-per-host>20000</max-connections-per-host>
                </http-client>
                <max-error-failover>10</max-error-failover>
                <max-time-failover unit="SECONDS">10</max-time-failover>
                <ping-period unit="SECONDS">5</ping-period>
                <reroute-delay unit="MINUTES">20</reroute-delay>
<% if cache_secondary != '' -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_secondary %>:<%= l_port_cache %>/nmp-cache"/>
<% else -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache"/>
<% end -%>
            </remote>
        </cache>
        <cache id="mailaccountknowledge">
            <remote type="cacheserver">
                <http-client>
                    <read-timeout-ms>10000</read-timeout-ms>
                    <connect-timeout-ms>10000</connect-timeout-ms>
                    <max-connections-total>20000</max-connections-total>
                    <max-connections-per-host>20000</max-connections-per-host>
                </http-client>
                <max-error-failover>10</max-error-failover>
                <max-time-failover unit="SECONDS">10</max-time-failover>
                <ping-period unit="SECONDS">5</ping-period>
                <reroute-delay unit="MINUTES">20</reroute-delay>
<% if cache_secondary != '' -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_secondary %>:<%= l_port_cache %>/nmp-cache"/>
<% else -%>
                <store uri="http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache, http://<%= cache_primary %>:<%= l_port_cache %>/nmp-cache"/>
<% end -%>
            </remote>
        </cache>
    </caches>
</CONFIGURATION>
